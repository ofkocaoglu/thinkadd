<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LPBF Material Universe</title>
  <!-- TailwindCSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Chart.js DataLabels Plugin -->
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
</head>
<body class="bg-gray-50">
  <div class="container mx-auto p-4">
    <h1 class="text-3xl font-bold text-center mb-8">LPBF Material Universe</h1>
    <!-- Chart Container -->
    <div class="max-w-md mx-auto">
      <canvas id="materialChart"></canvas>
    </div>
    <!-- Legend / Lists -->
    <div id="materialLists" class="mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6"></div>
  </div>

  <script>
    // ðŸ“Œ Paste your full JSON data extracted from the Excel here:
    const materialData = {
      /*
        "Aluminum Alloys": ["AlSi10Mg", "AlSi7Mg", ...],
        "Titanium Alloys": ["Ti6Al4V Grade 5", ...],
        ...
      */
    };

    // Prepare data for chart
    const categories = Object.keys(materialData);
    const dataValues = categories.map(() => 1);

    // Define colors per category
    const colors = [
      '#e63946','#f4a261','#e9c46a','#a8dadc','#2a9d8f',
      '#b87333','#1d3557','#6a4c93','#9d4edd','#8ac926'
    ];

    // Abbreviations for DataLabels
    const abbreviations = {
      'Aluminum Alloys':'Al',
      'Titanium Alloys':'Ti',
      'Precious Metals':'PM',
      'Refractory Metals':'RM',
      'Cobalt-Chrome Alloys':'Co',
      'Copper Alloys':'Cu',
      'Nickel Superalloys':'Ni',
      'Tool Steel & Others':'TS',
      'Stainles Steel':'SS',
      'Magnesium Alloys':'Mg'
    };

    // Initialize Chart
    const ctx = document.getElementById('materialChart').getContext('2d');
    Chart.register(ChartDataLabels);
    new Chart(ctx, {
      type: 'doughnut',
      data: {
        labels: categories,
        datasets: [{ data: dataValues, backgroundColor: colors, borderWidth: 1 }]
      },
      options: {
        responsive: true,
        cutout: '50%',
        plugins: {
          legend: { display: false },
          datalabels: {
            color: '#fff',
            formatter: (val, ctx) => {
              const label = ctx.chart.data.labels[ctx.dataIndex];
              return abbreviations[label] || label;
            },
            font: { weight: 'bold', size: 14 }
          },
          tooltip: {
            callbacks: {
              title: items => items[0].label,
              label: item => materialData[item.label].join(', ')
            }
          }
        }
      }
    });

    // Render Category Lists Below Chart
    const listContainer = document.getElementById('materialLists');
    categories.forEach(cat => {
      const box = document.createElement('div');
      box.className = 'bg-white p-4 rounded shadow';
      const title = document.createElement('h2');
      title.className = 'font-semibold mb-2';
      title.textContent = cat;
      box.appendChild(title);

      const ul = document.createElement('ul');
      ul.className = 'list-disc list-inside text-sm';
      materialData[cat].forEach(item => {
        const li = document.createElement('li');
        li.textContent = item;
        ul.appendChild(li);
      });
      box.appendChild(ul);
      listContainer.appendChild(box);
    });
  </script>
</body>
</html>
